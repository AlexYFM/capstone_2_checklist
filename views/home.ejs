<body class="d-flex flex-column h-100">
    <%- include("partials/header.ejs") %>
    <div class="container d-flex justify-content-center">
        <h1>Daily Task List</h1>
    </div>
    <div class="container d-flex justify-content-center">
        <ul class="list-group list-group-light my-5">
        <% for(let i=0; i<locals.home.length; i++){ %>
            <li class="task list-group-item d-flex align-items-center">
                <input type="checkbox" class="checkbox">
                <p class="p-2"><%= locals.home[i] %></p>
            </li>
        <%} %>
            <li class="task list-group-item d-flex align-items-center">
                <form action="/submit" method="POST">
                    <input type="text" name="task" placeholder="New task">
                    <button class="btn btn-primary rounded-circle" type="submit">
                        +
                    </button>
                </form>
            </li>
        </ul>
    </div>
    <%- include("partials/footer.ejs") %>

    <script>
        for (let i=0; i<document.querySelectorAll('.checkbox').length; i++){
            let checkbox = document.querySelectorAll('.checkbox')[i]
            checkbox.addEventListener('change', () => {
                if (checkbox.checked){
                    let parent = checkbox.parentElement
                    parent.querySelector('p').classList.add('checked')
                }
                else{
                    let parent = checkbox.parentElement
                    parent.querySelector('p').classList.remove('checked')
                }
            })
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html>